#pragma checksum "C:\Users\vitor\source\repos\Lab\Prato_do_Dia\Labb\Labb\Views\Manage\Clientes.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "adda76e3e707940bcaaad7494f368c433c5d4e9f"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Manage_Clientes), @"mvc.1.0.view", @"/Views/Manage/Clientes.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "C:\Users\vitor\source\repos\Lab\Prato_do_Dia\Labb\Labb\Views\_ViewImports.cshtml"
using Labb;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\vitor\source\repos\Lab\Prato_do_Dia\Labb\Labb\Views\_ViewImports.cshtml"
using Labb.Models;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"adda76e3e707940bcaaad7494f368c433c5d4e9f", @"/Views/Manage/Clientes.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"016b9a2e3b30ed8750926c5611148010ac32a865", @"/Views/_ViewImports.cshtml")]
    public class Views_Manage_Clientes : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<dynamic>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#nullable restore
#line 1 "C:\Users\vitor\source\repos\Lab\Prato_do_Dia\Labb\Labb\Views\Manage\Clientes.cshtml"
  
    ViewData["title"] = "Clientes";
    List<Cliente> clientes = (List<Cliente>)ViewData["clientes"];

#line default
#line hidden
#nullable disable
            WriteLiteral(@"
<div class=""modal fade"" id=""BloqueioModal"" tabindex=""-1"" role=""dialog"" aria-labelledby=""BloqueioModalLabel"" aria-hidden=""true"">
    <div class=""modal-dialog"" role=""document"">
        <div class=""modal-content"">
            <div class=""modal-header"">
                <h5 class=""modal-title"" id=""BloqueioModalLabel"">Bloquear Utilizador</h5>
                <button type=""button"" class=""close btn"" data-dismiss=""modal"" aria-label=""Close"">
                    <span aria-hidden=""true"">&times;</span>
                </button>
            </div>
            <div class=""modal-body"">
                <div class=""form-group"">
                    <label for=""BloqueioTempo"">Tempo de Bloqueio:</label>
                    <input id=""BloqueioTempo"" class=""form-control"" type=""number"" placeholder=""Tempo de Bloqueio"" />
                </div>
                <div class=""form-group"">
                    <label for=""RazaoBloqueio"">Razão do bloqueio:</label>
                    <textarea id=""RazaoBloqueio"" class=""for");
            WriteLiteral(@"m-control"" placeholder=""Razão do bloqueio""></textarea>
                </div>
            </div>
            <div class=""modal-footer"">
                <button type=""button"" class=""btn btn-secondary"" data-dismiss=""modal"">Close</button>
                <button type=""button"" class=""btn btn-danger"" id=""FinalBlock"">Bloquear</button>
            </div>
        </div>
    </div>
</div>

<table class=""table"">
    <thead>
        <tr>
            <th>UserName</th>
            <th>Email</th>
            <th>Estado</th>
            <th>Ações</th>
        </tr>
    </thead>
    <tbody>
");
#nullable restore
#line 43 "C:\Users\vitor\source\repos\Lab\Prato_do_Dia\Labb\Labb\Views\Manage\Clientes.cshtml"
         foreach(Cliente cli in clientes)
        {
            bool blocked = cli.IdUtilizadorNavigation.BloqueadoValor.HasValue? cli.IdUtilizadorNavigation.BloqueadoValor.Value:false;

#line default
#line hidden
#nullable disable
            WriteLiteral("            <tr>\r\n                <td>");
#nullable restore
#line 47 "C:\Users\vitor\source\repos\Lab\Prato_do_Dia\Labb\Labb\Views\Manage\Clientes.cshtml"
               Write(cli.IdUtilizadorNavigation.UserName);

#line default
#line hidden
#nullable disable
            WriteLiteral("</td>\r\n                <td>");
#nullable restore
#line 48 "C:\Users\vitor\source\repos\Lab\Prato_do_Dia\Labb\Labb\Views\Manage\Clientes.cshtml"
               Write(cli.IdUtilizadorNavigation.Email);

#line default
#line hidden
#nullable disable
            WriteLiteral("</td>\r\n                <td>");
#nullable restore
#line 49 "C:\Users\vitor\source\repos\Lab\Prato_do_Dia\Labb\Labb\Views\Manage\Clientes.cshtml"
                Write(blocked?Html.Raw("Bloqueado"):Html.Raw("Normal"));

#line default
#line hidden
#nullable disable
            WriteLiteral("</td>\r\n                <td><button class=\"btn btn-danger mr-1\" data-uid=\"");
#nullable restore
#line 50 "C:\Users\vitor\source\repos\Lab\Prato_do_Dia\Labb\Labb\Views\Manage\Clientes.cshtml"
                                                             Write(cli.IdUtilizador);

#line default
#line hidden
#nullable disable
            WriteLiteral("\" data-name=\"");
#nullable restore
#line 50 "C:\Users\vitor\source\repos\Lab\Prato_do_Dia\Labb\Labb\Views\Manage\Clientes.cshtml"
                                                                                           Write(cli.IdUtilizadorNavigation.UserName);

#line default
#line hidden
#nullable disable
            WriteLiteral("\" onclick=\"StartBlock(this);\">Bloquear</button><button class=\"btn btn-success ml-1\" data-uid=\"");
#nullable restore
#line 50 "C:\Users\vitor\source\repos\Lab\Prato_do_Dia\Labb\Labb\Views\Manage\Clientes.cshtml"
                                                                                                                                                                                                                             Write(cli.IdUtilizador);

#line default
#line hidden
#nullable disable
            WriteLiteral("\" onclick=\"UpgradeUser(this);\">Promover a administrador</button></td>\r\n            </tr>\r\n");
#nullable restore
#line 52 "C:\Users\vitor\source\repos\Lab\Prato_do_Dia\Labb\Labb\Views\Manage\Clientes.cshtml"
        }

#line default
#line hidden
#nullable disable
            WriteLiteral("    </tbody>\r\n</table>\r\n\r\n");
            DefineSection("scripts", async() => {
                WriteLiteral(@" 
<script type=""text/javascript"">
    function UpgradeUser(element) {
        let uid = $(element).attr(""data-uid"");
        $.ajax({
            type: ""POST"",
            url: ""/api/manage/UpgradeUser"",
            data: {
                UID: uid
            }
        }).done((resp) => {
            toastr.success(""Utilizador promovido a administrador com sucesso!"", ""Administração"");
            $(element).parent().parent().delete();
        }).catch((resp) => {
            toastr.error(""Não foi possivel promover o utilizador a administrador"", ""Administração"");
        });
    }
    function StartBlock(element) {
        let uid = $(element).attr(""data-uid"");
        let username = $(element).attr(""data-name"");
        $(""#BloqueioModalLabel"").text(`Bloquear Utilizador: ${username}`);
        $(""#BloqueioModal"").modal(""toggle"");
        $(""#FinalBlock"").attr(""data-uid"", uid);
    }
    $(""#FinalBlock"").on(""click"", () => {
        let tempoblock = $(""#BloqueioTempo"").val();
        ");
                WriteLiteral(@"let razao = $(""#RazaoBloqueio"").val();
        let UID = $(""#FinalBlock"").attr(""data-uid"");
        $.ajax({
            type: ""POST"",
            url: ""/api/manage/BlockUser"",
            data: {
                UID: UID,
                razao: razao,
                duracao: tempoblock
            }
        }).done((resp) => {
            toastr.success(`Cliente Bloqueado por ${tempoblock} hora/s`, ""Administração"");
            $(""#BloqueioModal"").modal(""toggle"");
            $(""#BloqueioTempo"").val("""");
            $(""#RazaoBloqueio"").val("""");
        }).catch((resp) => {
            toastr.error(""Não foi possivel bloquear o cliente por favor recaregue a página e tente novamente"", ""Administração"");
            $(""#BloqueioModal"").modal(""toggle"");
            $(""#BloqueioTempo"").val("""");
            $(""#RazaoBloqueio"").val("""");
        });
    });
</script>
");
            }
            );
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; }
    }
}
#pragma warning restore 1591
